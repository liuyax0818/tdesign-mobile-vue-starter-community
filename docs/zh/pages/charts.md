# 数据图表页 {#charts}

本界面是 `数据图表页`，进行数据统计与可视化展示，可通过 `个人中心` 页进入。本页面主要展示应用的整体运营情况、互动数据、内容完播率以及按区域统计的数据。

## 页面思路 {#design-idea}

**本页面的视觉稿如图所示**

![数据图表页视觉稿](/images/charts.png)

根据视觉稿的特点，将页面划分为 `顶部导航栏模块`、`整体情况模块`、`互动情况模块`、`完播率模块` 和 `按区域统计模块` 五个不同的功能模块进行开发。采用卡片式布局，每个模块独立展示不同维度的数据统计结果。

## 模块功能 {#features}

**顶部导航栏模块**

居中加粗显示"数据中心"标题，提供返回上一页面功能

**整体情况模块**

展示应用的最核心运营数据，包括浏览量、PV（页面访问量）和UV（独立访客数），相关数值采用蓝色或黑色加大加粗显示

**互动情况模块**

用于展示用户互动相关的数据统计，包括浏览量、点赞量、分享量和收藏量

**完播率模块**

会显示不同时间段的内容完播率数据，采用进度条直观展示各时间段的完播率百分比

**按区域统计模块**

表格形式陈列不同视频在全球、华北、华东等区域的访问量数据，支持横向滚动查看更多区域数据

## 模块结构 {#structure}

**代码结构**
```
src/views/statistics/
├── index.vue            # 数据图表页的整体页面结构和布局
├── hooks.tsx            # 集成了数据图表页相关的业务逻辑
└── components/          # 放置数据图表页的子组件
    ├── Overall.vue      # 整体情况模块
    ├── Interaction.vue  # 互动情况模块
    ├── CompleRate.vue   # 完播率模块
    └── Area.vue         # 区域统计模块
```

**index.vue**

- 将数据图表页的业务逻辑集成在 `hooks.tsx` 中，导入并使用 `useStatisticsHook` 获取数据图表页相关的状态和数据
- 组合使用各个子组件（本模板为`Overall`、`Interaction`、`CompleRate`、`Area`四个子组件）来展示不同维度的数据统计结果
- 每个模块独立展示不同维度的数据统计结果，基于此实现页面的整体布局和样式设置

**hooks.tsx**

- 定义并导出 `useStatisticsHook` 函数，封装页面所需的状态和逻辑
- 通过 `ref` 创建 `overallData`（整体情况数据）、`interData`（互动情况数据）、`compList`（完播率数据）和 `areaData`（区域统计数据）四大类数据，对应不同模块所需数据，开发者可以根据情况来进行数据更新

**Overall.vue**

展示应用的整体运营情况数据，接收 `time` 和 `data` 作为 props，其中 `data` 包含浏览量、PV和UV等统计数据

**Interaction.vue**

展示用户互动数据，包含浏览量、点赞量、分享量和收藏量四种互动数据

**CompleRate.vue**

展示完播率，包含6个不同时间段的完播率数据，使用 `t-progress` 组件实现进度条可视化展示

**Area.vue**

展示按区域统计的数据，使用 `t-table` 组件实现表格数据展示，包含不同视频在各区域的访问量数据，基于 `t-table` 实现表格的
样式定制，包括边框、条纹等效果

## 开发指南 {#development-guide}

**子组件开发**

在 `components` 目录下更改或创建各个子组件，为每个组件定义 props 接口，接收并渲染数据，根据设计要求实现组件的布局和样式

**业务逻辑开发**

在 `hooks.tsx` 中实现数据图表页的状态管理和业务逻辑

**页面整合**

 在 `index.vue` 中正确引入所需的所有子组件，不要忘记将 `useStatisticsHook` 提供的数据传递给对应的组件
**样式调整**

根据需求调整组件样式

## 扩展建议 {#ext}

- 目前本页面的数据为硬编码，可根据需求采用 `mock` 模拟数据，`hooks` 中通过 HTTP 接口接收
- 支持将统计数据导出为 Excel 或 CSV 格式
- 增加更多维度的数据统计模块，如用户画像、内容分类统计等

## 贡献者 {#contributors}

[Tonite14](https://github.com/Tonite14)、[hikari](https://github.com/liuyax0818)
